# HubSpot CRM

This project is a Customer Relationship Management (CRM) system integrated with the HubSpot API. The following documentation provides a step-by-step guide for setting up and running the project in your local environment.

## Prerequisites

Ensure you have the following software installed:

- **PHP** (version 8.1 or higher)
- **Composer** (latest version)
- **Node.js** (version 14.x or higher)
- **npm** (or yarn as an alternative)

## Project Setup

Follow these steps to set up and run the project locally.

### 1. Clone the Repository

```bash
git clone https://github.com/jafar-iringallur/hubspot-crm.git
cd hubspot-crm
```
### 2. Install PHP Dependencies

Install the PHP dependencies using Composer:

```bash
composer install
```

### 3. Set Up the Environment Configuration

Copy the example environment file and create your own .env file:

```bash
cp .env.example .env
```

### 4. Generate Application Key

Generate the application key for Laravel:

```bash
php artisan key:generate
```

### 5.Create the Database

Create a new MySQL database named  ` hubspot_crm `

### 6. Run Migrations

Run the migrations to create the necessary tables:

```bash
php artisan migrate
```

### 7. Install JavaScript Dependencies

Install the JavaScript dependencies:

```bash
npm install
```

### 8. Start the Development Server

Start the Laravel development server:

```bash
php artisan serve
```

### 9. Compile Frontend Assets

Compile frontend assets with the following command:

```bash
npm run dev
```

You should now be able to access the application at http://localhost:8000.



## HubSpot Integration Setup

To integrate with HubSpot, follow these steps:

### 1. Create or Log in to Your HubSpot Developer Account
Go to [HubSpot Developer](https://developers.hubspot.com/) and either create a new developer account or log in to your existing account.

### 2. Create a HubSpot App

 1. In your HubSpot developer account, create a new app.
 2. Set the OAuth Scopes for your app to include the following:
`crm.objects.contacts.read`
`crm.objects.contacts.write`
 3. Set the Redirect URL for your app to:
`http://localhost:8000/hubspot/callback`

### 3.Update Environment Variables
Once your HubSpot app is created, you will receive a Client ID and Client Secret. Update your .env file with these values:
```bash
HUBSPOT_CLIENT_ID=your_hubspot_client_id
HUBSPOT_CLIENT_SECRET=your_hubspot_client_secret
```

### 4.Connect HubSpot to Your CRM Application

After registering and logging in to the application, navigate to the HubSpot integration section. From there, you can connect your HubSpot account, allowing you to:

- Import contacts from HubSpot.
- Add new contacts to HubSpot.
- Update existing contacts.
- Delete contacts.



## Webhook Setup for Syncing HubSpot Actions to CRM
To sync HubSpot actions like contact creation, deletion, and updates with your CRM app, follow these steps to set up webhooks in your HubSpot app:

### 1. Install and Configure ngrok
To test webhooks locally, you need to expose your local server to the internet. For this, you will use ngrok:

   1. Visit the [ngrok](https://ngrok.com/) website and sign up or log in.

   2. Download and install ngrok based on your operating system.

   3. Once installed, set up your ngrok authentication token by running the following command:

```bash
ngrok authtoken your_authtoken
```
 4. Start ngrok by exposing your local Laravel app:

```bash
ngrok http http://localhost:8000
```
  5. You will receive a public URL from ngrok, something like:

```
https://cb3f-2405-201-f010-bf-d568-9297-f55f-3feb.ngrok-free.app
```
### 2. Add Webhook URL in HubSpot App Settings
1. Go to your HubSpot developer account, navigate to your app, and find the Webhook settings.

2. Add the public URL generated by ngrok, appending /hubspot/webhook to it. For example:

```bash
https://cb3f-2405-201-f010-bf-d568-9297-f55f-3feb.ngrok-free.app/hubspot/webhook
```
3. Subscribe to HubSpot Contact Events
In the same Webhook settings page of your HubSpot app, subscribe to the following events for the Contact object:

 - contact.creation – Triggered when a new contact is created.
 - contact.deletion – Triggered when a contact is deleted.
 - contact.propertyChange(email, firstname, lastname) – Triggered when any of the contact properties like email, first name, or last name change.
4. Sync Contact Events with CRM App
After setting up webhooks, your CRM app will now be able to receive real-time updates from HubSpot regarding contacts, enabling you to sync the creation, deletion, and updates of contacts directly in your CRM.

Following these steps, you will have a fully functioning CRM application integrated with HubSpot, including the ability to handle contact synchronization using webhooks.
